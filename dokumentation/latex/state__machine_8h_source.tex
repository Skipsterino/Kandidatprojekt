\hypertarget{state__machine_8h_source}{}\section{state\+\_\+machine.\+h}
\label{state__machine_8h_source}\index{styr/styr/state\+\_\+machine.\+h@{styr/styr/state\+\_\+machine.\+h}}

\begin{DoxyCode}
00001 
00011 \textcolor{preprocessor}{#ifndef STATE\_MACHINE\_H\_}
00012 \textcolor{preprocessor}{#define STATE\_MACHINE\_H\_}
00013 
00014 \textcolor{preprocessor}{#ifndef F\_CPU}
00015 \textcolor{preprocessor}{#define F\_CPU 16000000UL        // 16 MHz}
00016 \textcolor{preprocessor}{#endif}
00017 
00018 \textcolor{preprocessor}{#include "SPI.h"}
00019 \textcolor{preprocessor}{#include "gangstilar.h"}
00020 
\hypertarget{state__machine_8h_source.tex_l00024}{}\hyperlink{state__machine_8h_a94b1da2e055fff4d143aa6aa891f79a9}{00024} \textcolor{keyword}{typedef} \textcolor{keyword}{enum} \{
00025     CORRIDOR = 1, 
00026     OUT\_OF\_CORRIDOR\_NO\_WALL = 2, 
00027     OUT\_OF\_CORRIDOR\_LEFT\_WALL = 3, 
00028     OUT\_OF\_CORRIDOR\_RIGHT\_WALL = 4,
00029     
00030     INTO\_HIGH\_OBSTACLE = 5, 
00031     INTO\_LOW\_OBSTACLE = 6, 
00032     INTO\_TURN\_RIGHT = 7,  
00033     INTO\_TURN\_LEFT = 8, 
00034     INTO\_JUNCTION\_A\_RIGHT = 9, 
00035     INTO\_JUNCTION\_A\_LEFT = 10,
00036     
00037     TURN\_RIGHT = 11, 
00038     TURN\_LEFT = 12, 
00039     JUNCTION\_A\_RIGHT = 13, 
00040     JUNCTION\_A\_LEFT = 14, 
00041     JUNCTION\_B\_RIGHT = 15, 
00042     JUNCTION\_B\_LEFT = 16, 
00043     JUNCTION\_C\_RIGHT = 17, 
00044     JUNCTION\_C\_LEFT = 18, 
00045     
00046     DEAD\_END = 19,
00047     MID\_DEAD\_END = 20,
00048     
00049     HIGH\_OBSTACLE = 21, 
00050     LOW\_OBSTACLE = 22, 
00051     CRAWLING\_OUT\_OF\_HIGH\_OBSTACLE = 23, 
00052     CRAWLING\_UNDER\_HIGH\_OBSTACLE = 24, 
00053     CLIMB\_UP = 25,
00054     
00055     OUT\_OF\_TURN\_RIGHT = 26, 
00056     OUT\_OF\_TURN\_LEFT = 27, 
00057     OUT\_OF\_JUNCTION\_A\_RIGHT = 28, 
00058     OUT\_OF\_JUNCTION\_A\_LEFT = 29, 
00059     OUT\_OF\_JUNCTION\_C\_RIGHT = 30, 
00060     OUT\_OF\_JUNCTION\_C\_LEFT = 31, 
00061     OUT\_OF\_HIGH\_OBSTACLE = 32, 
00062     OUT\_OF\_LOW\_OBSTACLE = 33,
00063     
00064     END\_OF\_COURSE = 34, 
00065     STOP = 35,
00066     INTO\_JUNCTION\_C\_RIGHT = 36,
00067     INTO\_JUNCTION\_C\_LEFT = 37,
00068     INTO\_CORRIDOR\_NO\_WALL = 38,
00069 \} \hyperlink{state__machine_8h_a94b1da2e055fff4d143aa6aa891f79a9}{STATES};
00070 
\hypertarget{state__machine_8h_source.tex_l00071}{}\hyperlink{state__machine_8h_a5776a711f0156180fe5efb79c9ffc24f}{00071} \textcolor{preprocessor}{#define HALF\_ROTATION\_ANGLE 85          }
\hypertarget{state__machine_8h_source.tex_l00072}{}\hyperlink{state__machine_8h_a40718a26b2b107afdc38533db41cc0a3}{00072} \textcolor{preprocessor}{#define FULL\_ROTATION\_ANGLE 175         }
\hypertarget{state__machine_8h_source.tex_l00073}{}\hyperlink{state__machine_8h_a201d56046ddf552d57b4862e0ec07a10}{00073} \textcolor{preprocessor}{#define CORRIDOR\_SIDE\_DISTANCE 60       }
\hypertarget{state__machine_8h_source.tex_l00074}{}\hyperlink{state__machine_8h_a31ba7e3e0116f665d5825f669052ed09}{00074} \textcolor{preprocessor}{#define SIDE\_DEAD\_END\_DISTANCE 150      }
\hypertarget{state__machine_8h_source.tex_l00075}{}\hyperlink{state__machine_8h_a9a1286b84f437e1c90d21ffc833a8b79}{00075} \textcolor{preprocessor}{#define END\_OF\_COURSE\_DISTANCE 80       }
\hypertarget{state__machine_8h_source.tex_l00076}{}\hyperlink{state__machine_8h_adf843098ef425aa129f5ff16d879f7f2}{00076} \textcolor{preprocessor}{#define SHORT\_TURN\_DISTANCE 38          }
\hypertarget{state__machine_8h_source.tex_l00077}{}\hyperlink{state__machine_8h_a365e437f4fdaddff7b28fa56e61a0060}{00077} \textcolor{preprocessor}{#define LONG\_TURN\_DISTANCE 100          }
\hypertarget{state__machine_8h_source.tex_l00078}{}\hyperlink{state__machine_8h_a8118fdbf1a36265000f2d42844e10747}{00078} \textcolor{preprocessor}{#define FORWARD\_DEAD\_END\_DISTANCE 180   }
\hypertarget{state__machine_8h_source.tex_l00079}{}\hyperlink{state__machine_8h_ada224a95ca04ac21b410ef6e23814eea}{00079} \textcolor{preprocessor}{#define JUNCTION\_A\_FORWARD\_DISTANCE 80  }
\hypertarget{state__machine_8h_source.tex_l00080}{}\hyperlink{state__machine_8h_a29b3e85ce789185a96d28f139e003d4c}{00080} \textcolor{preprocessor}{#define LOW\_OBSTACLE\_DISTANCE 40        }
\hypertarget{state__machine_8h_source.tex_l00081}{}\hyperlink{state__machine_8h_a7dc7e4111003eb72dfc6cfede130fb5f}{00081} \textcolor{preprocessor}{#define START\_CLIMBING\_UP\_DISTANCE 20   }
\hypertarget{state__machine_8h_source.tex_l00082}{}\hyperlink{state__machine_8h_a9df2253e22c049d64aab5f0cbfd7dae3}{00082} \textcolor{preprocessor}{#define START\_CLIMBING\_DOWN\_DISTANCE 50 }
\hypertarget{state__machine_8h_source.tex_l00083}{}\hyperlink{state__machine_8h_a647ce7a809da5ed12ea5319ed1c2b73f}{00083} \textcolor{preprocessor}{#define US\_HIGH\_OBSTACLE\_DISTANCE 40    }
\hypertarget{state__machine_8h_source.tex_l00084}{}\hyperlink{state__machine_8h_a83b61a7a575cb23097805af83236bcf0}{00084} \textcolor{preprocessor}{#define IR\_HIGH\_OBSTACLE\_DISTANCE 50    }
\hypertarget{state__machine_8h_source.tex_l00085}{}\hyperlink{state__machine_8h_a9d981c215ebe94b6be6a0d49ccd2dce8}{00085} \textcolor{preprocessor}{#define NO\_WALL\_DISTANCE 50             }
\hypertarget{state__machine_8h_source.tex_l00086}{}\hyperlink{state__machine_8h_aa31835133338361e7bffbaf776c9c7a1}{00086} \textcolor{preprocessor}{#define DEAD\_END\_DISTANCE 40            }
\hypertarget{state__machine_8h_source.tex_l00088}{}\hyperlink{state__machine_8h_a5490b49530b86e69dba553166cd9d71b}{00088} \textcolor{preprocessor}{#define CENTRE\_OFFSET 8 }
\hypertarget{state__machine_8h_source.tex_l00089}{}\hyperlink{state__machine_8h_ac8d21b48b36c2d8b9192522087aab758}{00089} \textcolor{preprocessor}{#define CORRIDOR\_WIDTH 80 }
\hypertarget{state__machine_8h_source.tex_l00091}{}\hyperlink{state__machine_8h_a74134a484bf5067e7afa67b9a5911d24}{00091} \textcolor{preprocessor}{float IMU\_Yaw\_start; }
\hypertarget{state__machine_8h_source.tex_l00092}{}\hyperlink{state__machine_8h_a51f98684c825046dd85a9256f18bbce9}{00092} \textcolor{preprocessor}{uint8\_t start\_Yaw\_set; }
\hypertarget{state__machine_8h_source.tex_l00093}{}\hyperlink{state__machine_8h_a1397b4e16ab884b8328c03fd65fe9d52}{00093} \textcolor{preprocessor}{uint8\_t first\_state\_cycle; }
\hypertarget{state__machine_8h_source.tex_l00094}{}\hyperlink{state__machine_8h_ad03c0546202eb3154602cb8a0993c51f}{00094} \textcolor{preprocessor}{uint8\_t rotation\_count; }
\hypertarget{state__machine_8h_source.tex_l00096}{}\hyperlink{state__machine_8h_ab1551d8043c2aa4410fb7dbb1fe3be7b}{00096} \textcolor{preprocessor}{float Yaw, Yaw\_rad, p\_part, Kp, Kd, alpha; }
\hypertarget{state__machine_8h_source.tex_l00097}{}\hyperlink{state__machine_8h_ade9e1f9555516012861be1695fe4a9a0}{00097} \textcolor{preprocessor}{float IR\_0, IR\_1, IR\_2, IR\_3, IR\_4, IR\_5, IR\_6, US, IR\_Yaw\_left, IR\_Yaw\_right, IMU\_Yaw, Yaw, Pitch, Roll; }
\hypertarget{state__machine_8h_source.tex_l00099}{}\hyperlink{state__machine_8h_a5e5321a4a9085b83c8161454bf7a145c}{00099} \textcolor{preprocessor}{STATES ROBOT\_STATE; }
00106 \textcolor{preprocessor}{void update\_state();}
00107 
00114 \textcolor{keywordtype}{void} \hyperlink{state__machine_8h_aba55a309968f3014c9c40ea01400e733}{run\_state}(\textcolor{keywordtype}{float} height\_value);
00115 
00121 \textcolor{keywordtype}{void} \hyperlink{state__machine_8h_aefb7e87df9971d6e6c5641db5185ca6c}{load\_sensor\_values}();
00122 
00129 \textcolor{keywordtype}{void} \hyperlink{state__machine_8h_a5611f3fef1c7ebe6f76d952adf576e86}{calculate\_Yaw}();
00130 
00137 \textcolor{keywordtype}{void} \hyperlink{state__machine_8h_a1207bf6b642796032a59633adcb689f2}{calculate\_p\_part}();
00138 
00139 \textcolor{preprocessor}{#endif }\textcolor{comment}{/* STATE\_MACHINE\_H\_ */}\textcolor{preprocessor}{}
00140 
\end{DoxyCode}
